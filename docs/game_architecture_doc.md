# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–æ –ª–æ–≥—ñ–∫–∏ —Ç–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ –≥—Ä–∏

## üî∑ –ó–∞–≥–∞–ª—å–Ω–∞ —ñ–¥–µ—è

–¶–µ–π –ø—Ä–æ—î–∫—Ç ‚Äî Telegram-–±–æ—Ç –¥–ª—è —Å–∏–º—É–ª—è—Ü—ñ–π–Ω–æ—ó –≥—Ä–∏ –∑ –ø–æ–∫—Ä–æ–∫–æ–≤–æ—é –º–µ—Ö–∞–Ω—ñ–∫–æ—é. –ì—Ä–∞–≤—Ü—ñ –æ–±–∏—Ä–∞—é—Ç—å –¥—ñ—ó, —è–∫—ñ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Å–ø—ñ–ª—å–Ω–∏–π —Ä–µ—Å—É—Ä—Å (–æ–∑–µ—Ä–æ), —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–æ–∂–Ω–æ–≥–æ —Ö–æ–¥—É –æ–±—á–∏—Å–ª—é—é—Ç—å—Å—è —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è. –ú–æ–∂–ª–∏–≤—ñ –∫–æ–ª–µ–∫—Ç–∏–≤–Ω—ñ –Ω–∞—Ä–∞–¥–∏, –ø–∞–≤–æ–¥–∫–∏, —è–∫—ã —Ç—Ä–æ—Ö–∏ –æ—á–∏—â—É—é—Ç—å –æ–∑–µ—Ä–æ, –≥–æ–ª–æ—Å—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≥—Ä–∏.

---

## –û—Å–Ω–æ–≤–Ω—ñ –∑–≤‚Äô—è–∑–∫–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

- `Game` ‚Äî –≥–æ–ª–æ–≤–Ω–∏–π –æ–±'—î–∫—Ç, —â–æ –∑–±–µ—Ä—ñ–≥–∞—î —Å—Ç–∞–Ω –≥—Ä–∏: —Å–ø–∏—Å–æ–∫ –≥—Ä–∞–≤—Ü—ñ–≤, –ø–æ—Ç–æ—á–Ω–∏–π —Ö—ñ–¥, –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (`settings`), —Ç–æ—â–æ.
- `Player` ‚Äî –º—ñ—Å—Ç–∏—Ç—å —Å—Ç–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –≥—Ä–∞–≤—Ü—è: –æ—á–∫–∏, –æ–±—Ä–∞–Ω—É –¥—ñ—é, –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
- `GameSettings` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä–∏, —è–∫—ñ –∑–∞–¥–∞—é—Ç—å –ø—Ä–∞–≤–∏–ª–∞ –≥—Ä–∏: —Ç—Ä–∏–≤–∞–ª—ñ—Å—Ç—å, –±–æ–Ω—É—Å–∏, –ª—ñ–º—ñ—Ç–∏.
- `TurnProcessor` ‚Äî –æ–±—Ä–æ–±–ª—è—î —Ö—ñ–¥: –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –¥—ñ—ó, –≤–∏–∫–ª–∏–∫–∞—î –ø–æ–¥—ñ—ó, –Ω–∞–¥—Å–∏–ª–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
- `ActionService` ‚Äî —Ä–µ–∞–ª—ñ–∑—É—î –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –¥—ñ–π –¥–æ –≥—Ä–∏.
- `MessengerService` ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –Ω–∞–¥–±—É–¥–æ–≤–∞ –¥–ª—è –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö, –∑–º—ñ–Ω–∞ –∫–ª–∞–≤—ñ–∞—Ç—É—Ä.
- `SessionService` ‚Äî –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç–∞–Ω—ñ–≤ –≥—Ä–∞–≤—Ü—ñ–≤ (`idle`, `waiting_lobby`, `in_game`).
- `MeetingService` ‚Äî –ª–æ–≥—ñ–∫–∞ –ø—Ä–æ–≤–µ–¥–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ç–∏–≤–Ω–∏—Ö –æ–±–≥–æ–≤–æ—Ä–µ–Ω—å.

–£—Å—è –ª–æ–≥—ñ–∫–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –º—ñ–∂ –≥—Ä–∞–≤—Ü–µ–º —ñ –±–æ—Ç–æ–º –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ Telegram-—Ö–µ–Ω–¥–ª–µ—Ä–∏, —è–∫—ñ –¥–µ–ª–µ–≥—É—é—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –≤ `CommandDispatcher`, `GameCoordinator`, –∞–±–æ –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —É —Å–µ—Ä–≤—ñ—Å–∏.

---

## –ó–∞—Å—Ç–æ—Å–æ–≤–∞–Ω—ñ –ø–∞—Ç–µ—Ä–Ω–∏

###  1. **State pattern (—á–µ—Ä–µ–∑ —Ä—É—á–Ω–∏–π —Ä–æ—É—Ç–∏–Ω–≥ –≤ SessionService + CommandManager)**

–ó–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Å—Ç–∞–Ω—É –≥—Ä–∞–≤—Ü—è (`idle`, `waiting_lobby`, `in_game`), –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π `CommandManager`, —â–æ –∑–∞–±–µ–∑–ø–µ—á—É—î —Ä—ñ–∑–Ω—ñ —Ä–µ–∞–∫—Ü—ñ—ó –Ω–∞ –æ–¥–Ω—ñ –π —Ç—ñ –∂ –∫–æ–º–∞–Ω–¥–∏.

–ù–∞–ø—Ä–∏–∫–ª–∞–¥, `"–ó–∞–≤–µ—Ä—à–∏—Ç–∏ –≥—Ä—É"` –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ —É —Å—Ç–∞–Ω—ñ `in_game`.

###  2. **Command pattern**

–ö–æ–∂–Ω–∞ —Ç–µ–∫—Å—Ç–æ–≤–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —è–∫ –æ–∫—Ä–µ–º–∏–π –∫–ª–∞—Å –∑ –º–µ—Ç–æ–¥–æ–º `execute(...)` —ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é `matches(...)`.

–õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏ –±–µ–∑ –∑–º—ñ–Ω –≤ —ñ—Å–Ω—É—é—á–æ–º—É –∫–æ–¥—ñ.

###  3. **Facade (MessengerService)**

–ê–±—Å—Ç—Ä–∞–≥—É—î –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å, –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö, –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–ª–∞–≤—ñ–∞—Ç—É—Ä.

–°–ø—Ä–æ—â—É—î –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Telegram API —É –ª–æ–≥—ñ—Ü—ñ –≥—Ä–∏.

###  4. **Template method (—á–∞—Å—Ç–∫–æ–≤–æ –≤ TurnProcessor)**

–í–∏–∑–Ω–∞—á–∞—î –ø–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –æ–±—Ä–æ–±–∫–∏ —Ö–æ–¥—É: –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —É–º–æ–≤ ‚Üí –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è –¥—ñ–π ‚Üí –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å ‚Üí –∑–∞–ø—É—Å–∫ –ø–æ–¥—ñ–π ‚Üí –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥—ñ–π.

–ö–æ–∂–µ–Ω –∫—Ä–æ–∫ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∞–±–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏ –±–µ–∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è —à–∞–±–ª–æ–Ω—É.

### 5. **Strategy pattern (–¥—ñ—ó –≥—Ä–∞–≤—Ü—ñ–≤)**

–£—Å—ñ –¥—ñ—ó —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —è–∫ –æ–∫—Ä–µ–º—ñ –∫–ª–∞—Å–∏, —â–æ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å —Å–ø—ñ–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `BaseAction.apply(game, player)`.

–õ–µ–≥–∫–æ –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—ñ —Ç–∏–ø–∏ –¥—ñ–π –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –æ–∫—Ä–µ–º–∏—Ö –±–µ–∑ –∑–º—ñ–Ω –≤ –æ—Å–Ω–æ–≤–Ω–æ–º—É –ø—Ä–æ—Ü–µ—Å–æ—Ä—ñ.